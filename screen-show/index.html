<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/bigdata.css">
    <link rel="stylesheet" type="text/css" href="css/swiper.min.css">
    <title>大屏展示</title>
</head>

<body>
    <!-- 联通监控系统大屏展示 顶部图片 -->
    <div id="title"></div>
    <!-- 中间电流效果 -->
    <div id="center">
        <!-- 运动电流  start-->
        <div id="c1"></div>
        <div id="c2"></div>
        <div id="c3"></div>
        <div id="c4"></div>
        <div id="c6"></div>
        <div id="c7"></div>
        <div id="c8"></div>
        <svg version="1.1" id="electricity" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="809.898px" height="454.771px" viewBox="-3 0 809.898 454.771" enable-background="new -3 0 809.898 454.771" xml:space="preserve">
            <path id="path-1" fill="none" stroke="none" stroke-width="4" stroke-miterlimit="10" d="M69,229l73-31"/>
            <path id="path-2" fill="none" stroke="none" stroke-width="4" stroke-miterlimit="10" d="M397,18l-51,22"/>
            <path id="path-3" fill="none" stroke="none" stroke-width="4" stroke-miterlimit="10" d="M390,102.328
                C390,155.718,303.367,199,196.5,199S3,155.718,3,102.328C3,48.938,89.633,5.656,196.5,5.656S390,48.938,390,102.328z"/>
            <path id="path-4" fill="none" stroke="none" stroke-width="3.8565" stroke-miterlimit="10" d="M292.666,190.334L547.668,311
                l-178,75l42,20l-99.001,45.666l-33.333-14L274,426.999l-12-4"/>
            <path id="path-5" fill="none" stroke="none" stroke-width="3.8565" stroke-miterlimit="10" d="M296.496,191.683l253,118l108-45
                l85.999,38l-283.999,122l-46.497-16.682l-98.666,44.666l-34.667-14.666l-1.333-8L265,424.667"/>
            <path id="path-6" fill="none" stroke="none" stroke-width="3.8565" stroke-miterlimit="10" d="M756,152l31.5,11.5L750.25,181
                l44,18.5L758.5,217l43.25,17.5L694,283l-39.5-19l-107,46.5L291,189.5"/>
            <path id="path-7" fill="none" stroke="none" stroke-width="3.8565" stroke-miterlimit="10" d="M753.133,148.674l35,13.333
                l-39.667,18l46.333,18.333l-38,17.663l44,17.333l-107.333,48l47.333,22.331l-283.333,120L369.667,386L546.8,311.335L290.133,189.336
                "/>
            <!--  -->
            <pattern id="electric" width="100%" height="100%" patternContentUnits="objectBoundingBox">
                <image width="1" height="1" xlink:href="img/ball.png"/>
            </pattern>

            <circle fill="url(#electric)" stroke-miterlimit="10" cx="0" cy="0" r="9">
                <animateMotion dur="5s" repeatCount="indefinite">
                    <mpath xlink:href="#path-1" />
                </animateMotion>
            </circle>
            <circle fill="url(#electric)" stroke-miterlimit="10" cx="0" cy="0" r="9">
                <animateMotion dur="7s" begin="0.5s" repeatCount="indefinite">
                    <mpath xlink:href="#path-1" />
                </animateMotion>
            </circle>
            <circle fill="url(#electric)" stroke-miterlimit="10" cx="0" cy="0" r="9">
                <animateMotion dur="6s" repeatCount="indefinite">
                    <mpath xlink:href="#path-2" />
                </animateMotion>
            </circle>
            <circle fill="url(#electric)" stroke-miterlimit="10" cx="0" cy="0" r="9">
                <animateMotion dur="8s" begin="0.5s" repeatCount="indefinite">
                    <mpath xlink:href="#path-2" />
                </animateMotion>
            </circle>
            <circle fill="url(#electric)" stroke-miterlimit="10" cx="0" cy="0" r="9">
                <animateMotion dur="10s" repeatCount="indefinite">
                    <mpath xlink:href="#path-3" />
                </animateMotion>
            </circle>
            <circle fill="url(#electric)" stroke-miterlimit="10" cx="0" cy="0" r="9">
                <animateMotion dur="10s" begin="2s" repeatCount="indefinite">
                    <mpath xlink:href="#path-3" />
                </animateMotion>
            </circle>
            <circle fill="url(#electric)" stroke-miterlimit="10" cx="0" cy="0" r="9" autoReverse="true">
                <animateMotion dur="8s" begin="1s" repeatCount="indefinite" keyPoints="1;0" keyTimes="0;1">
                    <mpath xlink:href="#path-4" />
                </animateMotion>
            </circle>
            <circle fill="url(#electric)" stroke-miterlimit="10" cx="0" cy="0" r="9" autoReverse="true">
                <animateMotion dur="12s" repeatCount="indefinite" keyPoints="1;0" keyTimes="0;1">
                    <mpath xlink:href="#path-5" />
                </animateMotion>
            </circle>
            <circle fill="url(#electric)" stroke-miterlimit="10" cx="0" cy="0" r="9" autoReverse="true">
                <animateMotion dur="15s" repeatCount="indefinite">
                    <mpath xlink:href="#path-6" />
                </animateMotion>
            </circle>
            <circle fill="url(#electric)" stroke-miterlimit="10" cx="0" cy="0" r="9" autoReverse="true">
                <animateMotion dur="13s" begin="1s" repeatCount="indefinite">
                    <mpath xlink:href="#path-7" />
                </animateMotion>
            </circle>
        </svg>
        <!-- 运动电流  end-->
    </div>
    <div class="sj"></div>
    <div class="sj5"></div>
    <!-- 系统健康状态 -->
    <div id="xtjkzt">
        <h2 class="h2">系统健康状态</h2>
        <div class="bk-3">
            <h3 id="zy-t">亦庄数据中心</h3>
            <h3 id="lf-t">廊坊数据中心</h3>
            <div id="score"></div>
            <div id="infomation">
                <div><span class="static-0"></span>正常</div>
                <div><span class="static-1"></span>信息</div>
                <div><span class="static-2"></span>轻微</div>
                <div><span class="static-3"></span>一般</div>
                <div><span class="static-4"></span>重要</div>
                <div><span class="static-5"></span>紧急</div>
            </div>
            <div class="swiper-container">
                <ul class="swiper-wrapper">
                    <!--  -->
                </ul>
            </div>
        </div>
        <div class="center-data">90</div>
    </div>
    <!-- 主机状态 -->
    <div id="zjzt">
        <h2 class="h2">主机状态</h2>
        <div class="_yx-status">
            <h3 id="yz-t">亦庄</h3>
            <div class="yz-zx _status-item green">
                <p class="font14">在线</p>
                <div class="_b1-line">
                    <div class="_b-solid"></div>
                </div>
                <div class="status-num"></div>
            </div>
            <div class="yz-lx _status-item red">
                <p class="font14">离线</p>
                <div class="_b1-line">
                    <div class="_b-solid"></div>
                </div>
                <div class="status-num"></div>
            </div>
            <div class="yz-whz _status-item gray">
                <p class="font14">维护中</p>
                <div class="_b1-line">
                    <div class="_b-solid"></div>
                </div>
                <div class="status-num"></div>
            </div>
        </div>
        <div class="_lf-status">
            <h3 id="lf-t">廊坊</h3>
            <div class="lf-zx _status-item green">
                <p class="font14">在线</p>
                <div class="_b1-line">
                    <div class="_b-solid"></div>
                </div>
                <div class="status-num"></div>
            </div>
            <div class="lf-lx _status-item red">
                <p class="font14">离线</p>
                <div class="_b1-line">
                    <div class="_b-solid"></div>
                </div>
                <div class="status-num"></div>
            </div>
            <div class="lf-whz _status-item gray">
                <p class="font14">维护中</p>
                <div class="_b1-line">
                    <div class="_b-solid"></div>
                </div>
                <div class="status-num"></div>
            </div>
        </div>
    </div>
    <!-- 总数 -->
    <div id="zs">
        <!-- 机房总数 -->
        <div id="jfzs">
            <span>&nbsp;</span>
            <span>机房总数</span>
        </div>
        <!-- 系统总数 -->
        <div id="xtzs">
            <span>&nbsp;</span>
            <span>系统总数</span>
        </div>
        <!-- 设备总数 -->
        <div id="sbzs">
            <span>&nbsp;</span>
            <span>设备总数</span>
        </div>
        <!-- 物理机总数 -->
        <div id="wljzs">
            <span>&nbsp;</span>
            <span>物理机总数</span>
        </div>
        <!-- 虚拟机总数 -->
        <div id="xnjzs">
            <span>&nbsp;</span>
            <span>虚拟机总数</span>
        </div>
    </div>
    <!-- 所有告警分布 -->
    <div id="sygjfb">
        <h2 class="h2">所有告警分布</h2>
        <div id="sygjfb-echarts"></div>
        <div id="sygj-name">
            <!-- <div>廊坊219机房</div>
            <div>廊坊219机房</div>
            <div>廊坊219机房</div>
            <div>廊坊219机房</div>
            <div>廊坊219机房</div>
            <div>廊坊219机房</div>
            <div>廊坊219机房</div>
            <div>廊坊219机房</div>
            <div>廊坊219机房</div>
            <div>廊坊219机房</div>
            <div>廊坊219机房</div>
            <div>廊坊219机房</div> -->
        </div>
    </div>
    <!-- 各机房告警级别分布 -->
    <div id="gjfgjjb">
        <h2 class="h2">各机房告警级别分布</h2>
        <div id="gjfgjjb-echarts"></div>

        <div id="gjfgjjb-titledata"></div>
        <div class="jiantou2"></div>
    </div>
    <!-- 告警总数走势折线图 -->
    <div id="gjzszs">
        <h2 class="h2">告警总数走势折线图</h2>
        <div id="gjzszs-echarts"></div>
    </div>
    <!-- CPU/内存/磁盘使用系统Top5 -->
    <div id="cpu">
        <h2 class="h2">CPU/内存/磁盘使用系统Top5</h2>
        <div class="_absolute1">
            <div class="_absolute2">
                <div id="cpu-yz" class="anim-change"></div>
                <div id="cpu-lf" class="anim-change"></div>
                <div id="nc-yz" class="anim-change"></div>
                <div id="nc-lf" class="anim-change"></div>
                <div id="cp-yz" class="anim-change"></div>
                <div id="cp-lf" class="anim-change"></div>
            </div>
            <div id="sys"></div>
        </div>
    </div>
    <!-- cpu/内存折线图 -->
    <div id="cpu-left">
        <div id="cpu-echars"></div>
    </div>
    <!-- 设备机房分布图 -->
    <div id="sbjf">
        <h2 class="h2">设备机房分布图</h2>
        <div id="sbjf-echarts"></div>
        <div id="sbjf-name"></div>
    </div>
    <!-- 各机房设备类型分布 -->
    <div id="sblx">
        <h2 class="h2">各机房设备类型分布</h2>
        <div id="sblx-echarts"></div>
        <div id="sblx-titledata"></div>
        <div class="jiantou"></div>
    </div>
    <script type="text/javascript" src="js/jquery-2.1.3.min.js"></script>
    <script type="text/javascript" src="js/swiper.min.js"></script>
    <script type="text/javascript" src="js/echarts.min.js"></script>
    <script type="text/javascript">
    //----------------------------------------------------------------------------------
    // 系统健康状态
    //----------------------------------------------------------------------------------
    var LFDATA = {};
    var YZDATA = {};
    var counter = 0;
    var swiper;

    function initData() {
        $.ajax({
                url: 'https://zxs0827.github.io/web-back/JSON/lf.json',
                type: 'GET',
                dataType: 'json',
            })
            .done(function(datajson) {
                LFDATA = datajson.data;
                addCounter();
            })
        $.ajax({
                url: 'https://zxs0827.github.io/web-back/JSON/yz.json',
                type: 'GET',
                dataType: 'json',
            })
            .done(function(datajson) {
                YZDATA = datajson.data;
                addCounter()
            })

        function addCounter() {
            ++counter
            if (counter == 2) {
                console.log(LFDATA);
                console.log(YZDATA);
                // 亦庄数据长度
                var yzLength = YZDATA.length;
                // 廊坊数据长度
                var lfLength = LFDATA.length;
                // 取最大长度
                var maxNum = Math.max(yzLength, lfLength);
                $("ul.swiper-wrapper").html("");
                for (var i = 0; i < maxNum; i++) {
                    // 亦庄 填充文字
                    var yz_context = YZDATA[i % yzLength].sys_name.length > 15 ? YZDATA[i % yzLength].sys_name.substring(0, 15) + '..' : YZDATA[i % yzLength].sys_name;
                    // 廊坊 填充文字
                    var lf_context = LFDATA[i % lfLength].sys_name.length > 15 ? LFDATA[i % lfLength].sys_name.substring(0, 15) + '...' : LFDATA[i % lfLength].sys_name;
                    // 亦庄 状态圆形显示颜色
                    var yz_status = YZDATA[i % yzLength].priority;
                    // 廊坊 状态圆形显示颜色
                    var lf_status = LFDATA[i % lfLength].priority;
                    var yz_html = '<div class="left-data"><span class="infor-' + yz_status + '"></span>' + yz_context + '</div>';
                    var lf_html = '<div class="right-data"><span class="infor-' + lf_status + '"></span>' + lf_context + '</div>';
                    var html = yz_html + lf_html;
                    $("<li />", {
                        html: html,
                        'class': 'swiper-slide'
                    }).appendTo('ul.swiper-wrapper');
                }
                if (swiper) {
                    swiper.destroy();
                }
                swiper = new Swiper('.swiper-container', {
                    direction: 'vertical',
                    loop: true, // 环路
                    slidesPerView: 5, //每页显示条数
                    simulateTouch: false, //鼠标拖动事件
                    autoplay: {
                        delay: 8000,
                        disableOnInteraction: false,
                    }
                });
            }
        }
        // });
    }
    initData();
    setInterval(function() {
        counter = 0;
        initData();
    }, 400000);
    //----------------------------------------------------------------------------------
    // 主机状态
    //----------------------------------------------------------------------------------
    (function zjztInit() {
        $.getJSON('https://zxs0827.github.io/web-back/JSON/status.json', function(datajson, textStatus) {
            /*optional stuff to do after success */
            console.log(datajson);
            // 在线
            $(".yz-zx .status-num").text(datajson.data.zaixianyz);
            $(".lf-zx .status-num").text(datajson.data.zaixianlf);
            // 离线
            $(".yz-lx .status-num").text(datajson.data.duankaiyz);
            $(".lf-lx .status-num").text(datajson.data.duankailf);
            // 维护中
            $(".yz-whz .status-num").text(datajson.data.weihuyz);
            $(".lf-whz .status-num").text(datajson.data.weihulf);
        });
    })();
    // 设备总数
    (function zsInit() {
        $.ajax({
                url: 'https://zxs0827.github.io/web-back/JSON/zs.json',
                type: 'GET',
                dataType: 'json',
            })
            .done(function(datajson) {
                // 机房总数
                $("#jfzs span:nth-child(1)").text(datajson.data.jifang);
                // 系统总数
                $("#xtzs span:nth-child(1)").text(datajson.data.system);
                // 设备总数
                $("#sbzs span:nth-child(1)").text(datajson.data.host);
                // 物理机总数
                $("#wljzs span:nth-child(1)").text(datajson.data.wuhost);
                // 虚拟机总数
                $("#xnjzs span:nth-child(1)").text(datajson.data.xnhost);
            })
    })();
    //----------------------------------------------------------------------------------
    // 设备机房分布图
    //----------------------------------------------------------------------------------
    function sbjfInit() {
        function echartsInit(datajson) {
            var data1 = [];
            var data2 = [];
            var dataShadow = [];

            $.each(datajson.data, function(index, val) {
                $.each(val, function(i, v) {
                    data1.push(v.jifangname);
                    data2.push(v.cons);
                })
            });


            var sbjf_echarts = echarts.init($("#sbjf-echarts")[0]);
            var maxNum = Math.max.apply({}, data2);
            maxNum = 3000;
            for (var i = 0; i < data1.length; i++) {
                dataShadow.push(maxNum);
            }
            var option = {
                title: {
                    // text: ''
                },
                textStyle: {
                    color: 'rgb(255, 255, 255)',
                    fontSize: 4
                },
                tooltip: {
                    show: false
                },
                legend: {
                    // data: ['']
                },
                grid: [{
                    width: '100%',
                    bottom: 0,
                    left: 0,
                    containLabel: true,
                }],
                xAxis: {
                    data: data1,
                    axisLabel: {
                        interval: 0,
                        rotate: -90,
                        textStyle: {
                            color: 'rgba(255,255,255,0)'
                        }
                    },
                    nameTextStyle: {
                        fontSize: 20
                    },
                    axisLine: {
                        lineStyle: {
                            color: "#fff"
                        },
                        show: true
                    },
                },
                yAxis: {
                    axisLine: {
                        lineStyle: {
                            color: "#fff"
                        },
                        show: true
                    },
                    splitLine : {
                        show: true,
                        lineStyle : {
                            color : 'rgba(255,255,255,0.1)'
                        }
                    },
                },
                series: [{ // For shadow
                    type: 'bar',
                    itemStyle: {
                        normal: { color: 'rgba(255,255,255,0.1)' }
                    },
                    barGap: '-100%',
                    barCategoryGap: '40%',
                    data: dataShadow,
                    animation: false
                    // animationDelay: function(idx) {
                    //     return idx * 500;
                    // }
                }, {
                    type: 'bar',
                    data: data2,
                    itemStyle: {
                        normal: {
                            color: new echarts.graphic.LinearGradient(
                                0, 0, 0, 1, [
                                    { offset: 0, color: '#83bff6' },
                                    { offset: 0.5, color: '#188df0' },
                                    { offset: 1, color: '#188df0' }
                                ]
                            )
                        }
                    },
                    animationDelay: function(idx) {
                        return idx * 500;
                    }
                }]
            };
            sbjf_echarts.setOption(option);
            // 非canvas 直接生成文字，应客户需求实现文字垂直显示
                (function verticalText(el,names){
                    $.each(names, function(index, val) {
                        $("<div />",{
                            html: val
                        }).appendTo(el);
                    });
                })($("#sbjf-name"),data1);

            setInterval(function() {
                sbjf_echarts.clear();
                sbjf_echarts.setOption(option);
            }, 20000);
        }
        $.ajax({
                url: 'https://zxs0827.github.io/web-back/JSON/shebeidata.json',
                type: 'GET',
                dataType: 'json',
            })
            .done(function(datajson) {
                echartsInit(datajson);
            })
            .fail(function() {
                console.log("error");
            })
            .always(function() {
                console.log("complete");
            });
    }
    sbjfInit();
    //----------------------------------------------------------------------------------
    // 各机房设备类型分布 
    //----------------------------------------------------------------------------------
    function sblxInit() {
        $.ajax({
                url: 'https://zxs0827.github.io/web-back/JSON/shebeidata.json',
                type: 'GET',
                dataType: 'json',
            })
            .done(function(datajson) {
                // console.log('+++++++++++');
                // console.log(datajson);
                // console.log('+++++++++++');

                console.log("success");
                var arrHosts = [];
                var hostsCount = 0;
                var eachCount = 0;

                var titleData = [];

                $.each(datajson.data, function(index, val) {
                    $.each(val, function(index, val) {
                        titleData.push(val.jifangname);

                        arrHosts[eachCount] = new Array();

                        $.each(val.data, function(index, val) {
                            // 临时
                            if (val.cons === 0) {
                                val.cons = 20;
                            }

                            arrHosts[eachCount].push({
                                value: val.cons,
                                name: val.host_type + ':' + val.cons
                            });
                        });

                        eachCount++;
                    });
                });

                $("#sblx-titledata").text(titleData[0]);
                $(".jiantou").css("opactiy","1");

                // 替代函数
                // var arr = [];
                // $.each(datajson.data, function(index, val) {
                //      $.each(val,function(i,v){
                //         $.each(v.data,function(key,value){
                //             value["value"] = value.cons;
                //             value["name"] = value.host_type;
                //             delete value.count;
                //             delete value.cons;
                //             delete value.host_type;
                //         })
                //         arr.push(v.data);
                //      })
                // });


                var sblx_echarts = echarts.init($("#sblx-echarts")[0]);
                var option = {
                    color: ['rgb(0, 88, 255)', 'rgb(12, 156, 250)'],
                    series: [{
                        type: 'pie',
                        radius: ['60%', '80%'],
                        grid: {
                            width: '100%',
                            left: 0,
                            right: 0,
                            containLabel: true
                        },
                        label: {
                            normal: {
                                show: true,
                                fontSize: 20,
                                lineHeight: 50,
                                position: 'center'
                            }
                        },
                        labelLine: {
                            normal: {
                                show: true,
                                length: 1,
                                length2: 10
                            }
                        },
                        data: arrHosts[hostsCount]
                    }]
                }
                sblx_echarts.setOption(option);
                setInterval(function() {
                    hostsCount++;
                    hostsCount = hostsCount % arrHosts.length;

                    option.series[0].data = arrHosts[hostsCount];

                    sblx_echarts.clear();
                    sblx_echarts.setOption(option);

                    $("#sblx-titledata").text(titleData[hostsCount]);
                }, 20000);
            });
    }
    sblxInit();
    //------------------------------------------------------------------
    // 所有告警分布
    //------------------------------------------------------------------
    function sygjfbInit() {
        var count = 0;
        var echartsPieCount = 0; // 饼状图索引
        var echartsPieData = []; // 饼状图数据
        var intervalCount = 0; // 饼状图循环计数器
        var intervalLength = null; // 饼状图循环长度
        function echartsInit(datajson) {
            count = count + 1;
            if (count == 1) {
                var data1 = [];
                var data2 = [];
                var dataShadow = [];
                $.each(datajson.data, function(index, val) {
                    $.each(val, function(index, val) {
                        data1.push(val.jifangname);
                        data2.push(val.jifang);
                        echartsPieData[echartsPieCount] = new Array();
                        $.each(val.data, function(index, val) {
                            // 临时
                            if (val.cons === 0) {
                                val.cons = 20;
                            }
                            echartsPieData[echartsPieCount].push({
                                value: val.cons,
                                name: (function() {
                                    // return val.priority
                                    switch (val.priority) {
                                        case 1:
                                            return "信息:" + val.cons;
                                        case 2:
                                            return "轻微:" + val.cons;
                                        case 3:
                                            return "一般:" + val.cons;
                                        case 4:
                                            return "重要:" + val.cons;
                                        case 5:
                                            return "紧急:" + val.cons;
                                        default:
                                            return val.priority
                                            break;
                                    }
                                })()
                            });
                        });
                        echartsPieCount++;
                    });
                });
                intervalLength = echartsPieData.length;
                var sbjf_echarts = echarts.init($("#sygjfb-echarts")[0]);
                var maxNum = Math.max.apply({}, data2);
                if (maxNum % 10 > 0) {
                    var strMaxNum = maxNum.toString();
                    strMaxNum = strMaxNum.substring(0, strMaxNum.length - 1);
                    maxNum = (parseInt(strMaxNum) + 1) * 10;
                }
                for (var i = 0; i < data1.length; i++) {
                    dataShadow.push(maxNum);
                }
                var option = {
                    title: {
                        // text: ''
                    },
                    textStyle: {
                        color: 'rgb(255, 255, 255)',
                        fontSize: 4
                    },
                    tooltip: {
                        show: false
                    },
                    legend: {
                        // data: ['']
                    },
                    grid: [{
                        width: '100%',
                        bottom: '0',
                        left: '0',
                        containLabel: true,
                    }],
                    xAxis: {
                        data: data1,
                        axisLabel: {
                            interval: 0,
                            rotate: -90,
                            textStyle: {
                                color: 'rgba(255,255,255,0)'
                            }
                        },
                        nameTextStyle: {
                            fontSize: 20
                        },
                        axisLine: {
                            lineStyle: {
                                color: "#fff"
                            },
                            show: true
                        },
                    },
                    yAxis: {
                        axisLine: {
                            lineStyle: {
                                color: "#fff"
                            },
                            show: true,

                        },
                        splitLine : {
                        show: true,
                        lineStyle : {
                            color : 'rgba(255,255,255,0.1)'
                        }
                    },
                    },
                    series: [{ // For shadow
                        type: 'bar',
                        itemStyle: {
                            normal: { color: 'rgba(255,255,255,0.1)' }
                        },
                        barGap: '-100%',
                        // barCategoryGap: '40%',
                        barCategoryGap: '40%',
                        data: dataShadow,
                        animation: false
                        // animationDelay: function(idx) {
                        //     return idx * 500;
                        // }
                    }, {
                        // name: '销量',
                        type: 'bar',
                        data: data2,
                        itemStyle: {
                            normal: {
                                color: new echarts.graphic.LinearGradient(
                                    0, 0, 0, 1, [
                                        { offset: 0, color: '#83bff6' },
                                        { offset: 0.5, color: '#188df0' },
                                        { offset: 1, color: '#188df0' }
                                    ]
                                )
                            }
                        },
                        animationDelay: function(idx) {
                            return idx * 500;
                        }
                    }]
                };
                sbjf_echarts.setOption(option);

                // 非canvas 直接生成文字，应客户需求实现文字垂直显示
                (function verticalText(el,names){
                    $.each(names, function(index, val) {
                        $("<div />",{
                            html: val
                        }).appendTo(el);
                    });
                })($("#sygj-name"),data1);

                echartsPieInit(intervalCount);

                $("#gjfgjjb-titledata").text(data1[0]);
                $(".jiantou2").css("opacity","1");
                setInterval(function() {
                    sbjf_echarts.clear();
                    sbjf_echarts.setOption(option);
                }, 20000);
                var echartsPieInterval = setInterval(function() {
                    intervalCount++;
                    echartsPieInit(intervalCount % intervalLength);
                    console.log('INTERVALCOUNT :' + intervalCount);
                    $("#gjfgjjb-titledata").text(data1[intervalCount % intervalLength]);
                }, 20000);
            }
        }
        //-----------------------------------------------------------------
        // 各机房告警级别分布
        //-----------------------------------------------------------------

        function echartsPieInit(index) {
            var gjfgjjb_echarts = echarts.init($("#gjfgjjb-echarts")[0]);
            var option = {
                series: [{
                    type: 'pie',
                    radius: ' 55%',
                    roseType: 'radius',
                    center: ['50%', '50%'],
                    labelLine: {
                        normal: {
                            length: -5,
                            show: false
                        }
                    },
                    color: ['rgb(236, 134, 81)', 'rgb(255, 101, 218)', 'rgb(54, 116, 233)', 'rgb(86, 207, 236)', 'rgb(194, 194, 49)'],
                    data: echartsPieData[index]
                }]
            }
            gjfgjjb_echarts.setOption(option);
        }
        $.ajax({
                url: 'https://zxs0827.github.io/web-back/JSON/jfgj.json',
                type: 'GET',
                dataType: 'json',
            })
            .done(function(datajson) {

                echartsInit(datajson);
            })
            .fail(function() {})
            .always(function() {});
    }
    sygjfbInit();
    //-----------------------------------------------------------------------------------------
    // 告警总数走势折线图
    //-----------------------------------------------------------------------------------------
    function gjzszsInit() {
        function echartsInit(data) {
            var gjzszs_echarts = echarts.init(document.getElementById("gjzszs-echarts"));
            var data1 = [];
            var data2 = [];
            var xData = [];
            var yData = [];
            var lineCount = 0;
            var lineNum = 24;
            $.each(data, function(index, val) {
                // data1.push(val.clock);
                data1.push(val.clock.substring(11, 16));
                data2.push(val.cons);
            });
            xData = data1.slice(lineCount, lineCount + lineNum);
            // alert(xData);
            console.log(xData);
            yData = data2.slice(lineCount, lineCount + lineNum);
            var maxNum = Math.max.apply({}, data2);
            if (maxNum % 50 > 0) {
                maxNum = Math.ceil(maxNum / 50) * 50;
            }
            var option = {
                grid: {
                    width: '80%',
                },
                xAxis: [{
                    // name: '时间',
                    type: 'category',
                    boundaryGap: false,
                    axisLine: {
                        lineStyle: {
                            color: "#fff"
                        },
                        show: true
                    },
                    axisLabel: {  
                        fontSize: 12,
                        interval: 0,
                        rotate: 45
                    } ,
                    
                    data: xData
                }],
                yAxis: [{
                    type: 'value',
                    scale: true,
                    name: '     告警数量 / 时间',
                    max: maxNum,
                    min: 0,
                    axisLine: {
                        lineStyle: {
                            color: "#fff"
                        },
                        show: true
                    },
                    splitLine : {
                        show: true,
                        lineStyle : {
                            color : 'rgba(255,255,255,0.1)',
                        }
                    },
                    boundaryGap: [0.2, 0.2]
                }],
                series: [{
                    type: 'line',
                    itemStyle: {
                        normal: {
                            color: 'rgba(255, 255, 255,0.6)',
                            shadowBlur: 10,
                            shadowColor: 'white'
                        }
                    },
                    areaStyle: {
                        normal: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                offset: 0,
                                color: 'rgba(107, 107, 255,0.4)'
                            }, {
                                offset: 0.8,
                                color: 'rgba(0, 230, 255, 0.4)'
                            }])
                        }
                    },
                    symbolSize: 8,
                    data: yData
                }]
            };
            gjzszs_echarts.setOption(option);

            setInterval(function(){
                gjzszs_echarts.clear();
                gjzszs_echarts.setOption(option);
            }, 20000);

            // setInterval(function() {
            //     lineCount++;
            //     lineCount = lineCount % data.length;
            //     var xAxis = option.xAxis[0].data;
            //     var series = option.series[0].data;
            //     xAxis.shift();
            //     // xAxis.push(data1[lineCount + lineNum - 1] % data.length) ;
            //     xAxis.push(data1[(lineCount + lineNum - 1) % data.length]);
            //     series.shift();
            //     // series.push(data2[lineCount + lineNum - 1]);
            //     series.push(data2[(lineCount + lineNum - 1) % data.length]);
            //     gjzszs_echarts.setOption(option);
            // }, 60000);
        }
        $.ajax({
                url: 'https://zxs0827.github.io/web-back/JSON/alertcount.json',
                type: 'GET',
                dataType: 'json',
            })
            .done(function(datajson) {
                echartsInit(datajson.data);
            })
            .fail(function() {
                console.log("error");
            })
            .always(function() {
                console.log("complete");
            });
    }
    gjzszsInit();
    //----------------------------------------------------------------------------------
    //系统名称切换滚动
    //----------------------------------------------------------------------------------
    $(document).ready(function() {
        $.ajax({
                url: 'https://zxs0827.github.io/web-back/JSON/cpu.json',
                type: 'GET',
                dataType: 'json',
                async: false,
            })
            .done(function(datajson) {
                console.log("success");
                console.log(datajson);
                //系统名称
                var str = "<div id='pt1'>";
                $.each(datajson.data.lfcp, function(index, val) {
                    var a = index + 1
                    str += "<div class='dsjpt" + a + "'>" + val.sys_name + "</div>"
                });
                str += "</div>";
                str += "<div id='pt2'>";
                $.each(datajson.data.lfcpu, function(index, val) {
                    var a = index + 1
                    str += "<div class='dsjpt" + a + "'>" + val.sys_name + "</div>"
                });
                str += "</div>";
                str += "<div id='pt3'>";
                $.each(datajson.data.lfnc, function(index, val) {
                    var a = index + 1
                    str += "<div class='dsjpt" + a + "'>" + val.sys_name + "</div>"
                });
                str += "</div>";
                str += "<div id='pt4'>";
                $.each(datajson.data.yzcp, function(index, val) {
                    var a = index + 1
                    str += "<div class='dsjpt" + a + "'>" + val.sys_name + "</div>"
                });
                str += "</div>";
                str += "<div id='pt5'>";
                $.each(datajson.data.yzcpu, function(index, val) {
                    var a = index + 1
                    str += "<div class='dsjpt" + a + "'>" + val.sys_name + "</div>"
                });
                str += "</div>";
                str += "<div id='pt6'>";
                $.each(datajson.data.yznc, function(index, val) {
                    var a = index + 1
                    str += "<div class='dsjpt" + a + "'>" + val.sys_name + "</div>"
                });
                str += "</div>";
                $("#sys").html(str);
                cpuEchartsInit(datajson.data);

                var o0 = {
                    'left': '50px',
                    'transform': 'scale(0.5)',
                    'z-index': '-10',
                    'opacity': '0.3'
                }
                var o1 = {
                    'left': '50px',
                    'transform': 'scale(0.5)',
                    'z-index': '0',
                    'opacity': '0'
                };
                var o2 = {
                    'left': '50px',
                    'transform': 'scale(0.5)',
                    'z-index': '0',
                    'opacity': '0'
                };
                var o3 = {
                    'left': '50px',
                    'transform': 'scale(0.5)',
                    'z-index': '0',
                    'opacity': '0'
                };
                var o4 = {
                    'left': '-50px',
                    'transform': 'scale(0.5)',
                    'z-index': '0',
                    'opacity': '0.3'
                };
                var o5 = {
                    'left': '0px',
                    'transform': 'scale(1)',
                    'z-index': '99',
                    'opacity': '1'
                };
                var a = [o0, o1, o2, o3, o4, o5];
                var mycars = 0;
                a.unshift(a.pop());
                $('#pt1').css(a[0]);
                $('#pt2').css(a[1]);
                $('#pt3').css(a[2]);
                $('#pt4').css(a[3]);
                $('#pt5').css(a[4]);
                $('#pt6').css(a[5]);
                setInterval(function() {
                    a.unshift(a.pop());
                    $('#pt1').css(a[0]);
                    $('#pt2').css(a[1]);
                    $('#pt3').css(a[2]);
                    $('#pt4').css(a[3]);
                    $('#pt5').css(a[4]);
                    $('#pt6').css(a[5]);
                    //改变CPU磁盘内容
                    $('#cpu-yz').css(a[0]);
                    $('#cpu-lf').css(a[1]);
                    $('#nc-yz').css(a[2]);
                    $('#nc-lf').css(a[3]);
                    $('#cp-yz').css(a[4]);
                    $('#cp-lf').css(a[5]);
                }, 20000);
            })
    });
    //----------------------------------------------------------------------------------
    //CPU/内存/磁盘折线图
    //----------------------------------------------------------------------------------
    function cpuEchartsInit(data) {
        var arrCpuClock = [];
        var arrCpuValue = [];
        var cpuCount = 0;
        var eachCount = 0;
        $.each(data, function(index1, val) {
            arrCpuClock[eachCount] = new Array();
            arrCpuValue[eachCount] = new Array();
            $.each(val, function(index2, val) {
                arrCpuClock[eachCount][index2] = new Array();
                arrCpuValue[eachCount][index2] = new Array();
                $.each(val.data, function(index3, val) {
                    arrCpuClock[eachCount][index2].push(val.clock.substring(11, 16));
                    arrCpuValue[eachCount][index2].push(val.value_avg);
                });
            });
            eachCount++;
        });
        var echars = echarts.init(document.getElementById("cpu-echars"));
        var color = ['#FFFFFF'];
        var colors = ['#019bfc', '#fe5300', '#ffff01', '#2251ff', '#f100ff'];
        var option = {
        	color: colors,
            title: {},
            tooltip: {
                show: false
            },
            legend: {
                data: []
            },
            grid: {
                width: '100%',
                left: '0',
                bottom: '0',
                containLabel: true
            },
            xAxis: {
                // name: '时间',
                nameLocation: 'start',
                type: 'category',
                boundaryGap: false,
                data: arrCpuClock[cpuCount][0],
                axisLine: {
                    onZero: false,
                    lineStyle: {
                        color: color[0]
                    }
                }
            },
            yAxis: {
                name: '                 平均使用率 / 时间',
                type: 'value',
                axisLine: {
                    onZero: false,
                    lineStyle: {
                        color: color[0]
                    }
                },
                splitLine : {
                    show: true,
                    lineStyle : {
                        color : 'rgba(255,255,255,0.1)'
                    }
                }
            },
            series: [{
                type: 'line',  
                data: arrCpuValue[cpuCount][0]
            }, {
                type: 'line',
                data: arrCpuValue[cpuCount][1]
            }, {
                type: 'line',
                data: arrCpuValue[cpuCount][2]
            }, {
                type: 'line',
                data: arrCpuValue[cpuCount][3]
            }, {
                type: 'line',
                data: arrCpuValue[cpuCount][4]
            }]
        };
        echars.setOption(option);
        setInterval(function() {
            cpuCount++;
            cpuCount = cpuCount % arrCpuValue.length;
            option.series[0].data = arrCpuValue[cpuCount][0];
            option.series[1].data = arrCpuValue[cpuCount][1];
            option.series[2].data = arrCpuValue[cpuCount][2];
            option.series[3].data = arrCpuValue[cpuCount][3];
            option.series[4].data = arrCpuValue[cpuCount][4];
            setTimeout(function() {
                echars.clear();
                echars.setOption(option);
            }, 500);
        }, 20000);
    }

    //----------------------------------------------------------------------------------
    //getyzlfinit() | 
    //----------------------------------------------------------------------------------
    // function getyzlfinit(){
    //     $.ajax({
    //         type: "post",
    //         // url: "${ctx}/exhibition/getyzlf",
    //         url: "https://zxs0827.github.io/web-back/JSON/getyzlf.json",
    //         async:false,
    //         dataType: "json",
    //         contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
    //         success: function(datajson) {
    //             console.log('+++++++++++getyzlf+++++++++++++');
    //             console.log(datajson.data);
    //             console.log('+++++++++++getyzlf+++++++++++++');
    //         }
    //     });
    // }
    // getyzlfinit();

    function getyzlfinit(){
        $.ajax({
            url: 'https://zxs0827.github.io/web-back/JSON/getyzlf.json',
            type: 'GET',
            dataType: 'json',
        })
        .done(function(datajson) {
          var str = "<div class='sj1'>物理机数量"+datajson.data.lfwlhost+"台</div>";
            str+="<div class='sj2'>虚拟机数量"+datajson.data.lfxnhost+"台</div>";
            str+="<div class='sj3'>主机状态数量"+datajson.data.lfhost+"台</div>";
            str+="<div class='sj4'>主机维护数量"+datajson.data.lfwhhost+"台</div>";
            $(".sj").html(str);
            
         var str2 = "<div class='sj6'>物理机数量"+datajson.data.yzwlhost+"台</div>";
            str2+="<div class='sj7'>虚拟机数量"+datajson.data.yzxnhost+"台</div>";
            str2+="<div class='sj8'>主机状态数量"+datajson.data.yzhost+"台</div>";
            str2+="<div class='sj9'>主机维护数量"+datajson.data.yzwhhost+"台</div>";
            $(".sj5").html(str2);
            
        })
        .fail(function() {
            console.log("error");
        })
        .always(function() {
            console.log("complete");
        });
        
    }

    getyzlfinit();
    </script>
</body>

</html>